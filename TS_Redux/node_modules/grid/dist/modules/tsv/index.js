"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parse = exports.stringify = void 0;
var stringify = function (data) {
    var stringResult = '';
    data.forEach(function (row, r) {
        row.forEach(function (value, c) {
            if (value.indexOf('\n') !== -1 || value.indexOf('\t') !== -1 || value.indexOf('"') !== -1) {
                value = '"' + value.replace(/"/g, '""') + '"';
            }
            stringResult += value;
            if (c !== row.length - 1) {
                stringResult += '\t';
            }
        });
        if (r !== data.length - 1) {
            stringResult += '\n';
        }
    });
    return stringResult;
};
exports.stringify = stringify;
function DSVToArray(strData, strDelimiter) {
    strDelimiter = (strDelimiter || ',');
    var objPattern = new RegExp(('(\\' + strDelimiter + '|\\r?\\n|\\r|^)' +
        '(?:"([^"]*(?:""[^"]*)*)"|' +
        '([^"\\' + strDelimiter + '\\r\\n]+))'), 'gi');
    var arrData = [
        []
    ];
    var arrMatches = null;
    while (arrMatches = objPattern.exec(strData)) {
        var strMatchedDelimiter = arrMatches[1];
        if (strMatchedDelimiter.length &&
            strMatchedDelimiter !== strDelimiter) {
            arrData.push([]);
        }
        var strMatchedValue = void 0;
        if (arrMatches[2]) {
            strMatchedValue = arrMatches[2].replace(new RegExp('""', 'g'), '"');
        }
        else {
            strMatchedValue = arrMatches[3];
        }
        arrData[arrData.length - 1].push(strMatchedValue);
    }
    return (arrData[0].length || !strData) && (arrData) || [
        [strData]
    ];
}
var parse = function (stringData) {
    return DSVToArray(stringData, '\t');
};
exports.parse = parse;
//# sourceMappingURL=index.js.map